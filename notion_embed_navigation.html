<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notion Photo Navigation</title>
    <!-- Tailwind CSSã‚’èª­ã¿è¾¼ã¿ -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* ã‚«ã‚¹ã‚¿ãƒ ã‚¹ã‚¿ã‚¤ãƒ«: è¦ç´ ã‚’ç”»é¢å…¨ä½“ã«åºƒã’ã€Notionã®åŸ‹ã‚è¾¼ã¿ã«æœ€é©åŒ–ã™ã‚‹ */
        body, html {
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden; /* Notionã®åŸ‹ã‚è¾¼ã¿ã§äºŒé‡ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ã‚’é˜²ã */
            font-family: 'Inter', sans-serif;
            background-color: #1f2937; /* ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã®èƒŒæ™¯ã«åˆã‚ã›ã‚‹ */
            color: #f3f4f6;
        }
        #app-container {
            display: flex;
            flex-direction: column;
            height: 100%;
            width: 100%;
        }
        #navigation-bar {
            flex-shrink: 0;
        }
        #iframe-container {
            flex-grow: 1; /* iframeã‚³ãƒ³ãƒ†ãƒŠãŒåˆ©ç”¨å¯èƒ½ãªã‚¹ãƒšãƒ¼ã‚¹ã‚’ã™ã¹ã¦å ã‚ã‚‹ */
            position: relative;
            /* Notionå´ã®èª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’éè¡¨ç¤ºã«ã™ã‚‹ãŸã‚ã«èƒŒæ™¯ã‚’ç™½ã«ã—ã¦ãŠã */
            background-color: #ffffff; 
        }
        #notion-iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        /* ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .btn-active {
            background-color: #4f46e5 !important;
            color: white !important;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body class="bg-gray-800 text-gray-100">

    <div id="app-container">

        <!-- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼ (ãƒ•ã‚£ãƒ«ã‚¿ã¨åˆ‡ã‚Šæ›¿ãˆãƒœã‚¿ãƒ³) -->
        <div id="navigation-bar" class="p-3 bg-gray-900 border-b border-gray-700 shadow-lg">
            
            <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-3 sm:space-y-0">
                
                <!-- 1. ã‚«ãƒ†ã‚´ãƒªãƒ•ã‚£ãƒ«ã‚¿ (ã‚¿ã‚°ã«ã‚ˆã‚‹åˆ†é¡) -->
                <div id="category-filters" class="flex flex-wrap gap-2">
                    <button class="filter-btn all-btn bg-gray-700 hover:bg-gray-600 text-sm font-semibold py-1 px-3 rounded-lg transition duration-150 btn-active" data-tag="all">
                        ã™ã¹ã¦
                    </button>
                    <!-- ã‚«ãƒ†ã‚´ãƒªãƒœã‚¿ãƒ³ã¯JSã§ã“ã“ã«å‹•çš„ã«è¿½åŠ ã•ã‚Œã¾ã™ -->
                </div>

                <!-- 2. ãƒ“ãƒ¥ãƒ¼åˆ‡ã‚Šæ›¿ãˆãƒœã‚¿ãƒ³ (è¡¨ç¤ºå½¢å¼ã®å¤‰æ›´) -->
                <div id="view-toggles" class="flex gap-2">
                    <button class="view-btn grid-btn bg-gray-700 hover:bg-gray-600 text-sm font-semibold py-1 px-3 rounded-lg transition duration-150 btn-active" data-view="grid">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect></svg>
                    </button>
                    <button class="view-btn list-btn bg-gray-700 hover:bg-gray-600 text-sm font-semibold py-1 px-3 rounded-lg transition duration-150" data-view="list">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg>
                    </button>
                </div>

            </div>
        </div>

        <!-- Notionã®åŸ‹ã‚è¾¼ã¿å…ˆï¼ˆiframeï¼‰ -->
        <div id="iframe-container">
            <!-- ãƒšãƒ¼ã‚¸ã®èª­ã¿è¾¼ã¿å¾Œã«JSã§iframeãŒæŒ¿å…¥ã•ã‚Œã¾ã™ -->
        </div>

    </div>

    <script>
        // =================================================================
        // ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®šã‚¨ãƒªã‚¢
        // =================================================================

        // 1. Notionã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹IDã‚’è¨­å®šã—ã¦ãã ã•ã„ã€‚
        // å…ƒã®URL: https://mint-headlight-c47.notion.site/e3dfdc3f07e746af9076ecafd868f02f
        // ãƒšãƒ¼ã‚¸IDã®ã¿ã‚’æŠ½å‡º: e3dfdc3f07e746af9076ecafd868f02f
        const NOTION_PAGE_ID = "e3dfdc3f07e746af9076ecafd868f02f"; 
        
        // 2. Notionã®ã€Œã‚¿ã‚°/ã‚«ãƒ†ã‚´ãƒªã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®é¸æŠè‚¢ã‚’è¨­å®šã—ã¦ãã ã•ã„
        const NOTION_TAGS = [
            "å¯’è‰²ç³»",
            "æš–è‰²ç³»",
            "ã‚¾ãƒ¼ãƒ³è‰¯å¥½",
            "ä¸‰åˆ†å‰²",
            "Nature",
            "Urban",
        ];

        // 3. Notionã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹URLã®æœ«å°¾ã«ã‚ã‚‹ãƒ“ãƒ¥ãƒ¼IDã‚’è¨­å®šã—ã¦ãã ã•ã„
        const VIEW_ID = "5cbfc69b6d6a4eadbdae06703ffe9b4f"; 

        // =================================================================
        // ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚¸ãƒƒã‚¯
        // =================================================================

        const iframeContainer = document.getElementById('iframe-container');
        const filterContainer = document.getElementById('category-filters');
        const viewContainer = document.getElementById('view-toggles');
        let currentTag = 'all'; 
        let currentView = 'grid'; 

        /**
         * NotionåŸ‹ã‚è¾¼ã¿URLã‚’ç”Ÿæˆã™ã‚‹
         * @returns {string} - Notionã®åŸ‹ã‚è¾¼ã¿URL
         */
        function generateNotionUrl() {
            // Notionã®IFrameåŸ‹ã‚è¾¼ã¿å°‚ç”¨å½¢å¼ã‚’ä½¿ç”¨
            let url = `https://www.notion.so/embed/${NOTION_PAGE_ID}`;
            
            // ãƒ“ãƒ¥ãƒ¼IDã‚’ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¨ã—ã¦ä»˜ä¸
            let queryParams = [];
            if (VIEW_ID) {
                queryParams.push(`v=${VIEW_ID}`);
            }

            // ğŸ’¡ ä¿®æ­£ç‚¹: Notionã«IFrameå†…ã§ã®è¡¨ç¤ºã‚’å¼·åˆ¶ã•ã›ã‚‹ãŸã‚ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¿½åŠ 
            queryParams.push(`embed=true`);

            // ãƒ‡ãƒãƒƒã‚°æƒ…å ±
            if (currentTag !== 'all' || currentView !== 'grid') {
                 queryParams.push(`custom_tag=${encodeURIComponent(currentTag)}`, `custom_view=${currentView}`);
            }

            if (queryParams.length > 0) {
                url += `?${queryParams.join('&')}`;
            }
            
            return url;
        }

        /**
         * iframeã‚’å†æ§‹ç¯‰ã—ã¦Notionã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’èª­ã¿è¾¼ã‚€
         */
        function loadNotionIframe() {
            const url = generateNotionUrl();
            
            // æ—¢å­˜ã®iframeã‚’å‰Šé™¤
            iframeContainer.innerHTML = '';

            // æ–°ã—ã„iframeã‚’ä½œæˆ
            const iframe = document.createElement('iframe');
            iframe.id = 'notion-iframe';
            iframe.src = url;
            iframe.title = 'Notion Embedded Content';
            
ã€€ã€€ã€€ã€€ã€€ã€€ã€€// iframeã®sandboxå±æ€§ã«ä¸è¶³ã—ã¦ã„ã‚‹æ¨©é™ã‚’è¿½åŠ 
ã€€ã€€ã€€ã€€ã€€ã€€ã€€iframe.setAttribute(
ã€€ã€€ã€€ã€€ã€€ã€€ã€€    'sandbox',
ã€€ã€€ã€€ã€€ã€€ã€€ã€€    'allow-scripts allow-same-origin allow-popups allow-forms **allow-modals allow-pointer-lock allow-presentation allow-top-navigation-by-user-activation allow-downloads**'
ã€€ã€€ã€€ã€€ã€€ã€€ã€€);
            
            iframeContainer.appendChild(iframe);
            
            console.log("Notion Iframe Loaded with URL:", url);
        }

        /**
         * ã‚«ãƒ†ã‚´ãƒªãƒ•ã‚£ãƒ«ã‚¿ãƒœã‚¿ãƒ³ã‚’å‹•çš„ã«ç”Ÿæˆã™ã‚‹
         */
        function renderCategoryFilters() {
            NOTION_TAGS.forEach(tag => {
                const button = document.createElement('button');
                button.className = 'filter-btn bg-gray-700 hover:bg-gray-600 text-sm font-semibold py-1 px-3 rounded-lg transition duration-150';
                button.textContent = tag;
                button.dataset.tag = tag;
                filterContainer.appendChild(button);
            });
        }

        /**
         * ãƒ•ã‚£ãƒ«ã‚¿ãƒœã‚¿ãƒ³ã®ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©
         */
        function handleFilterClick(event) {
            const target = event.target.closest('.filter-btn');
            if (!target) return;

            currentTag = target.dataset.tag;
            
            // ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚¯ãƒ©ã‚¹ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹
            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('btn-active'));
            target.classList.add('btn-active');

            // iframeã‚’å†èª­ã¿è¾¼ã¿
            loadNotionIframe(); 
        }

        /**
         * ãƒ“ãƒ¥ãƒ¼åˆ‡ã‚Šæ›¿ãˆãƒœã‚¿ãƒ³ã®ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©
         */
        function handleViewClick(event) {
            const target = event.target.closest('.view-btn');
            if (!target) return;

            currentView = target.dataset.view;
            
            // ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚¯ãƒ©ã‚¹ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹
            document.querySelectorAll('.view-btn').forEach(btn => btn.classList.remove('btn-active'));
            target.classList.add('btn-active');
            
            // iframeã‚’å†èª­ã¿è¾¼ã¿
            loadNotionIframe();
        }

        // ãƒšãƒ¼ã‚¸ã®åˆæœŸåŒ–å‡¦ç†
        window.onload = function() {
            // ã‚«ãƒ†ã‚´ãƒªãƒœã‚¿ãƒ³ã®æç”»
            renderCategoryFilters();
            
            // æœ€åˆã®URLã§iframeã‚’èª­ã¿è¾¼ã‚€ï¼ˆã™ã¹ã¦/ã‚°ãƒªãƒƒãƒ‰ï¼‰
            loadNotionIframe();

            // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã®è¨­å®š
            filterContainer.addEventListener('click', handleFilterClick);
            viewContainer.addEventListener('click', handleViewClick);
            
            // ã€é‡è¦ã€‘æœªè¨­å®šã®è­¦å‘Š
            if (NOTION_PAGE_ID === "YOUR_NOTION_PAGE_ID_HERE") {
                console.error("Notionã®ãƒšãƒ¼ã‚¸IDãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚JSå†…ã® NOTION_PAGE_ID ã‚’æ›´æ–°ã—ã¦ãã ã•ã„ã€‚");
            }
        };

        // ãƒšãƒ¼ã‚¸ãŒiframeå†…ã§å‹•ä½œã—ã¦ã„ã‚‹ã“ã¨ã‚’æ¤œçŸ¥ã™ã‚‹ãŸã‚ã®ç°¡æ˜“ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
        try {
            if (window.self !== window.top) {
                console.log("Running inside an iframe (Notion embed).");
            }
        } catch (e) {
            console.log("Cannot determine if running inside an iframe.");
        }
    </script>

</body>
</html>
